(this.webpackJsonpstatus_pages=this.webpackJsonpstatus_pages||[]).push([[0],{118:function(e,t,n){e.exports=n(211)},123:function(e,t,n){},124:function(e,t,n){},135:function(e,t){},137:function(e,t){},163:function(e,t){},165:function(e,t){},187:function(e,t){},211:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(36),c=n.n(o),i=(n(123),n(124),n(25)),u=n(26),s=n(29),l=n(27),f=n(30),O=n(41),p=n(19),h=n(28),E=n(38),d=n.n(E),v={AZURE_OK:"AZURE_OK",AZURE_FAIL:"AZURE_FAIL",AZURE_INCIDENTS:"AZURE_INCIDENTS",DATADOG_OK:"DATADOG_OK",DATADOG_FAIL:"DATADOG_FAIL",DATADOG_INCIDENTS:"DATADOG_INCIDENTS"},A={CORS_PROXY:"https://cors-anywhere.herokuapp.com/",AZURE_RSS:"https://azurestatuscdn.azureedge.net/en-us/status/feed/",DATADOG_RSS:"https://status.datadoghq.com/history.rss"},m={VIRTUAL_MACHINES:"Virtual Machines",CLOUD_SERVICES:"Cloud Services",AZURE_FUNCTIONS:"Azure Functions"},b={EAST_US:"East US",EAST_US_2:"East US 2",NORTH_EU:"North Europe"},D=function(){return{type:v.AZURE_OK}},_=function(){return{type:v.AZURE_FAIL}},g=function(e){return{type:v.AZURE_INCIDENTS,errorService:e}};var S=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={errors:n.props.errors},n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchAzureStatus(),this.interval=setInterval((function(){return e.reload()}),6e5)}},{key:"reload",value:function(){window.location.reload(!0)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"componentDidUpdate",value:function(e){this.props.errors.length!==e.errors.length&&this.setState({errors:this.props.errors})}},{key:"checkStatus",value:function(e,t){return this.state.errors.find((function(n){return n.service===e&&n.region===t}))?a.a.createElement("span",{style:{color:"red"}},"ERROR"):"GOOD"}},{key:"render",value:function(){var e=this,t=this.props,n=t.services,r=t.regions;return a.a.createElement("div",null,a.a.createElement("h1",null,"AZURE STATUS"),n.map((function(t,n){return a.a.createElement("div",{key:n},a.a.createElement("h2",null,t),r.map((function(n,r){return a.a.createElement("p",{key:r},n,": ",e.checkStatus(t,n))})))})))}}]),t}(r.Component),y=Object(h.b)((function(e){return{status:e.azure.status,services:e.azure.services,regions:e.azure.regions,errors:e.azure.errors}}),(function(e){return{fetchAzureStatus:function(){e((function(e){(new d.a).parseURL(A.CORS_PROXY+A.AZURE_RSS,(function(t,n){if(t)throw e(_()),t;if(0===n.items.length)console.log("OK"),e(D());else{var r=Object.values(m),a=Object.values(b),o=n.items.filter((function(e){return r.find((function(t){return e.title.includes(t)}))}));(o=o.filter((function(e){return a.find((function(t){return e.title.includes(t)}))}))).forEach((function(t){var n=r.filter((function(e){return t.title.includes(e)}));console.log(n);var o=a.filter((function(e){var n=new RegExp("\\b"+e+"( \\D)"),r=new RegExp("\\b"+e+"$");return t.title.match(n)||t.title.match(r)}));console.log(o),n.forEach((function(t){o.forEach((function(n){return console.log({name:t,region:n}),e(g({service:t,region:n}))}))}))}))}}))}))}}}))(S),j=function(){return{type:v.DATADOG_OK}},I=function(){return{type:v.DATADOG_FAIL}},R=function(e){return{type:v.DATADOG_INCIDENTS,errorService:e}};var w=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.props.fetchDatadogStatus(),this.interval=setInterval((function(){return e.reload()}),6e5)}},{key:"reload",value:function(){window.location.reload(!0)}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){return a.a.createElement("div",null,a.a.createElement("h1",null,"DATADOG INCIDENTS"),this.props.incidents.map((function(e,t){return a.a.createElement("div",{key:t},a.a.createElement("h2",null,t+1,". ",e.title),a.a.createElement("div",{dangerouslySetInnerHTML:{__html:e.content}}))})))}}]),t}(r.Component),T=Object(h.b)((function(e){return{status:e.datadog.status,incidents:e.datadog.incidents}}),(function(e){return{fetchDatadogStatus:function(){e((function(e){(new d.a).parseURL(A.CORS_PROXY+A.DATADOG_RSS,(function(t,n){if(t)throw e(I()),t;if(0===n.items.length)e(j());else{var r=n.items.slice(0,5);r.forEach((function(t){e(R({title:t.title,content:t.content}))})),console.log(r)}}))}))}}}))(w),U=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return a.a.createElement(O.a,null,a.a.createElement("div",null,a.a.createElement("p",null,a.a.createElement(O.b,{to:"/azure"},"Azure status")),a.a.createElement("p",null,a.a.createElement(O.b,{to:"/datadog"},"Datadog incidents")),a.a.createElement(p.c,null,a.a.createElement(p.a,{path:"/azure"},a.a.createElement(y,null)),a.a.createElement(p.a,{path:"/datadog"},a.a.createElement(T,null)))))}}]),t}(r.Component);var N=function(){return a.a.createElement("div",{className:"App"},a.a.createElement(U,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var k=n(18),C=n(40),P=n(39);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var L={services:Object.values(m),regions:Object.values(b),errors:[]};function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.AZURE_OK:case v.AZURE_FAIL:return Z({},e);case v.AZURE_INCIDENTS:return Z({},e,{errors:[].concat(Object(C.a)(e.errors),[t.errorService])});default:return e}}function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function K(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(n,!0).forEach((function(t){Object(P.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X={status:null,incidents:[]};function M(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v.DATADOG_OK:case v.DATADOG_FAIL:return K({},e);case v.DATADOG_INCIDENTS:return K({},e,{incidents:[].concat(Object(C.a)(e.incidents),[t.errorService])});default:return e}}var V=function(){return Object(k.c)({azure:z,datadog:M})},W=n(117),x=Object(k.e)(V(),Object(k.d)(Object(k.a)(W.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));c.a.render(a.a.createElement(h.a,{store:x},a.a.createElement(N,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[118,1,2]]]);
//# sourceMappingURL=main.a6c8056b.chunk.js.map